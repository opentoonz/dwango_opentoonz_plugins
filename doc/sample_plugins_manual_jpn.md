サンプルプラグインマニュアル
===

## `ComposeAdd`

線形色空間で色を加算するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `layer[0-9]` | 入力画像 |

### パラメータ

なし

## `ComposeMul`

線形色空間で色を乗算するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `layer[0-9]` | 入力画像。`layer0` が最下面で `layer9` が最上面です。`layer0` は必須です |

### パラメータ

なし

## `ComposeOptical`

クベルカ光学理論に基づいて色を重ね合わせるエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `layer[0-9]` | 入力画像。`layer0` が最下面で `layer9` が最上面です。`layer0` は必須です |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `gamma`    | 2.2 | 0.100 | 5.0 | ディスプレイのガンマ値 |
| `exposure` | 1.0 | 0.125 | 8.0 | フィルムの露出量。入力画像の露出を 1 として換算します。値を大きくすると暗くなり、小さくすると明るくなります |

## `BlurChromaticAberration`

RGB の各チャンネル毎に半径を設定できる円形ブラーです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | ブラーの対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `gamma`    |   2.20 | 0.100 |    5.0 | ディスプレイのガンマ値 |
| `exposure` |   1.00 | 0.125 |    8.0 | フィルムの露出量。入力画像の露出を 1 として換算します。値を大きくすると暗くなり、小さくすると明るくなります |
| `radius_r` |   0.01 | 1.000 |    1.0 | 赤色のブラー半径 |
| `radius_g` |   0.01 | 1.000 |    1.0 | 緑色のブラー半径 |
| `radius_b` |   0.01 | 1.000 |    1.0 | 青色のブラー半径 |
| `margin`   | 100.00 | 0.000 | 1024.0 | ブラーのマージン領域の大きさ |

## `BlurConvolution`

 マスク画像によってボケ形状を指定できるブラーです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |
| `A` | ブラー形状 |
| `B` | ブラー形状 |
| `C` | ブラー形状 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `intensity_a` |   1 | 0 |    8 | ブラー形状 `A` の明るさのスケーリング |
| `intensity_b` |   1 | 0 |    8 | ブラー形状 `B` の明るさのスケーリング |
| `intensity_c` |   1 | 0 |    8 | ブラー形状 `C` の明るさのスケーリング |
| `scale_a`     |   1 | 0 |    8 | ブラー形状 `A` の大きさのスケーリング |
| `scale_b`     |   1 | 0 |    8 | ブラー形状 `B` の大きさのスケーリング |
| `scale_c`     |   1 | 0 |    8 | ブラー形状 `C` の大きさのスケーリング |
| `margin`      | 100 | 0 | 1024 | ブラーのマージン領域の大きさ |

## `BlurMaskedC`

 マスク画像によって強度を調整できる円形ブラー (Circular Blur) です。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |
| `Mask` | 強度分布 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `radius_r` | 1 | 0 | 16 | 基準となる赤色のブラー半径 |
| `radius_g` | 1 | 0 | 16 | 基準となる緑色のブラー半径 |
| `radius_b` | 1 | 0 | 16 | 基準となる青色のブラー半径 |
| `radius_a` | 1 | 0 | 16 | 基準となるα色のブラー半径 |

## `BlurMaskedD`

 マスク画像によって強度を調整できる方向性ブラー (Directional Blur) です。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |
| `Mask` | 強度分布 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `radius_r` | 0.1 | 0 |   1 | 基準となる赤色のブラー半径 |
| `radius_g` | 0.1 | 0 |   1 | 基準となる緑色のブラー半径 |
| `radius_b` | 0.1 | 0 |   1 | 基準となる青色のブラー半径 |
| `radius_a` | 0.1 | 0 |   1 | 基準となるα色のブラー半径 |
| `angle`    | 0.0 | 0 | 360 | ブラー方向の角度 |

## `BlurMaskedR`

マスク画像によって強度を調整できる放射状ブラー (Radial Blur) です。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |
| `Mask` | 強度分布 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `radius_r` | 0.1 | 0 | 1 | 基準となる赤色のブラー半径 |
| `radius_g` | 0.1 | 0 | 1 | 基準となる緑色のブラー半径 |
| `radius_b` | 0.1 | 0 | 1 | 基準となる青色のブラー半径 |
| `radius_a` | 0.1 | 0 | 1 | 基準となるα色のブラー半径 |
| `x`        | 0.0 | 0 | 1 | ブラーの中心位置 x |
| `y`        | 0.0 | 0 | 1 | ブラーの中心位置 y |

## `BlurCurlNoise`

マスク入力を [curl-noise (PDF)](https://www.cs.ubc.ca/~rbridson/docs/bridson-siggraph2007-curlnoise.pdf) に変換して、入力画像に LIC (line integral convolution) をかけるエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |
| `Noise` | `CoherentNoise` の出力バッファ |
| `Mask` | `curl-noise` の境界条件 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `gain`        | 16.0 | 0.1 | 16.0 | ブラー強度 |
| `attenuation` |  0.9 | 0.0 |  1.0 | LIC の減衰率 |
| `debug`       |  0.0 | 0.0 |  1.0 | Noise の可視化 (デバッグ用) |

## `LightBloom`

エッジを保存したブラーにより、ブルームを生成するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `gamma`    |   2.2 | 0.100 |    5 | ディスプレイのガンマ値 |
| `exposure` |   1.0 | 0.125 |    8 | フィルムの露出量。入力画像の露出を 1 として換算します。値を大きくすると暗くなり、小さくすると明るくなります |
| `gain`     |   2.0 | 0.100 |   10 | ブルームの明るさ |
| `radius`   |   5.0 | 1.000 |   32 | ブラー半径 |
| `level`    |   8.0 | 0.000 |   10 | ブラー範囲 |
| `margin`   | 100.0 | 0.000 | 1024 | ブラーのマージン領域の大きさ |

## `LightGlare`

放射状のブラーにより、グレアを生成するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `gamma`       |   2.2 | 0.100 |    5.000 | ディスプレイのガンマ値 |
| `exposure`    |   1.0 | 0.125 |    8.000 | フィルムの露出量。入力画像の露出を 1 として換算します。値を大きくすると暗くなり、小さくすると明るくなります |
| `gain`        |   2.0 | 0.100 |   10.000 | グレアの明るさ |
| `radius`      |   0.1 | 0.010 |    1.000 | グレアの半径 |
| `attenuation` |   0.9 | 0.001 |    0.999 | グレアの減衰率 |
| `number`      |   6.0 | 2.000 |   10.000 | グレアの本数 |
| `angle`       |  15.0 | 0.000 |  180.000 | グレアの角度 |
| `margin`      | 100.0 | 0.000 | 1024.000 | ブラーのマージン領域の大きさ |

## `LightIncident`

アナログチックな入射光を生成するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |
| `Noise` | 入射光の強度分布 |
| `Mask` | 入射光のマスク |

### パラメータ群

#### 時間

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `time`       |  0.000 | 0 | 1500 | 時系列ノイズの時刻。値を変化させるとノイズがアニメーションします。`0` は特殊な値(フラグ)として扱われ、これを指定するとフレーム番号が利用されます |
| `time_limit` |  8.000 | 2 |  250 | 時間のループポイント。`time` は `[1,time_limit]` の範囲でループさせた値が利用されます |
| `beta`       | 10.000 | 0 |   30 | 入射光の方向の時間的な揺らぎ幅 |
| `gamma`      |  0.001 | 0 |    1 | 入射光の方向の時間的な揺らぎのなめらかさ |

#### 形状

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `distance`     |  2.00 |    0.00 |   5 | 入射光の原点の画面中心からの距離 |
| `theta`        | 40.00 | -180.00 | 180 | 入射光の原点の方向 |
| `phi`          | 30.00 |    0.00 |  90 | 入射光の原点の方向のばらつき範囲 |
| `alpha`        |  0.00 |  -45.00 |  45 | 入射光の方向の画面中心からのズレ |
| `width`        |  0.10 |    0.00 |  30 | 入射光の幅 |
| `length`       |  2.00 |    0.01 |  10 | 入射光の長さ |
| `scraggly`     |  0.20 |    0.01 |   2 | 長さのばらつき |
| `roughness`    |  0.02 |    0.01 |   1 | 入射光を構成する楕円形の長さ |
| `distinctness` |  0.50 |    0.01 |   2 | 入射光を構成する楕円形の幅 |
| `number`       | 40.00 |    1.00 | 100 | 入射光の数 |

#### 色

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `r`         | 1 | 0.00 |   1 | 入射光の赤色 |
| `g`         | 1 | 0.00 |   1 | 入射光の緑色 |
| `b`         | 1 | 0.00 |   1 | 入射光の青色 |
| `intensity` | 2 | 0.01 | 100 | 入射光の強度 |

#### 外形

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `blur` | 0.01 | 0 | 0.5 | 入射光形状のぼんやりさ加減 |

#### 距離減衰

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `falloff`     | 0.8 | 0.00 | 1.0 | 減衰する基点からの距離 |
| `sensitivity` | 0.1 | 0.01 | 2.0 | 減衰カーブの鋭さ |

#### 色分散

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `d_rate` | 7.0 | 0 | 8 | 色の反復周期 |
| `d_bias` | 0.5 | 0 | 8 | 色の強度 |
| `d_gain` | 0.3 | 0 | 1 | 色味の強さ |

#### ブルーム

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| level | 6.0 | 0 | 32 | ブルームの強度 |
| gain  | 1.0 | 0 |  8 | 銀モールによるブルームの強度 |
| bias  | 0.0 | 0 |  8 | 銀モールによるブルームの強度 |

#### システム

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `seed_intensity` | 0.99 | 0 | 1 | 入射光の強度分布の乱数シード |
| `seed_direction` | 0.98 | 0 | 1 | 入射光の方向分布の乱数シード |
| `seed_width`     | 0.97 | 0 | 1 | 入射光の幅分布の乱数シード |
| `seed_length`    | 0.96 | 0 | 1 | 入射光の長さ分布の乱数シード |
| `seed_gamma`     | 0.95 | 0 | 1 | 入射光の方向の時間変化にの乱数シード |
| `seed_phase`     | 0.94 | 0 | 1 | 入射光の楕円形の配置分布の乱数シード |

## `CoherentNoise`

`BlurCurlNoise`、`LightIncident`、および `WaveGlass` に入力するためのノイズを生成するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | `BlurCurlNoise`、`LightIncident`、および `WaveGlass` の `Input` と同じ入力を与えます |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `time`       | 1.00 | 1 | 1500 | 時系列ノイズの時刻。値を変化させるとノイズがアニメーションします。`0` は特殊な値(フラグ)として扱われ、これを指定するとフレーム番号が利用されます |
| `time_limit` | 8.00 | 2 |  250 | 時間のループポイント。`time` は `[1,time_limit]` の範囲でループさせた値が利用されます |
| `alpha`      | 0.80 | 0 |    1 | 時間変化の一貫性。値が大きいと一貫性が高くなり変化がなめらかになります |
| `gain`       | 1.00 | 0 |    1 | ノイズに乗する定数値 |
| `bias`       | 0.50 | 0 |    1 | ノイズに加える定数値 |
| `amp0`       | 1.00 | 0 |    1 | 低周波のノイズの強度 |
| `amp1`       | 0.80 | 0 |    1 | `amp0` の倍の周波数のノイズの強度 |
| `amp2`       | 0.60 | 0 |    1 | `amp1` の倍の周波数のノイズの強度 |
| `amp3`       | 0.40 | 0 |    1 | `amp2` の倍の周波数のノイズの強度 |
| `amp4`       | 0.20 | 0 |    1 | `amp3` の倍の周波数のノイズの強度 |
| `seed`       | 0.50 | 0 |    1 | 乱数のシード値。ノイズの形が変化します |

## `Drip`

入力画像の閾値以上の画素だけ抽出するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `threshold` | 0.9 | 0 | 1 | 明るさの閾値 |

## `Paraffin`

画面上にパラフィンを配置するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `distance` | -1.0 |   -1.5 |   1.5 | パラフィンの画面中心からの相対位置 |
| `theta`    | 40.0 | -180.0 | 180.0 | パラフィンの配置角度 |
| `radius`   |  0.1 |    0.0 |   1.0 | パラフィンのボケ半径 |
| `red`      |  0.0 |    0.0 |   1.0 | パラフィンの赤色 |
| `green`    |  0.0 |    0.0 |   1.0 | パラフィンの緑色 |
| `blue`     |  0.0 |    0.0 |   1.0 | パラフィンの青色 |

## `PencilHatching`

鉛筆によるハッチング効果を再現するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `angle`       | 0.00 | 0 | 360 | ハッチング角度 |
| `length`      | 0.01 | 0 |   1 | ハッチングの長さ |
| `attenuation` | 0.90 | 0 |   1 | ハッチングの入り抜きの減衰率 |
| `seed`        | 0.25 | 0 |   1 | 乱数のシード。ハッチングのばらつきが変化します |

## `WaveGlass`

ガラスによる光の屈折と減衰を再現するエフェクトです。波ガラス的な効果を得たいとき使えます。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |
| `Noise` | ガラスの凹凸 (`CoherentNoise` の出力バッファ) |
| `Mask` | 屈折によるゆがみ度合いの分布 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `gain`   | 1 | 0| 32.00 | 屈折によるゆがみ度合い |
| `eta`    | 2 | 1|  2.50 | ガラスの屈折率 |
| `height` | 1 | 0| 32.00 | セルとガラスの間の距離 |
| `depth`  | 1 | 0|  2.00 | ガラスの厚み |
| `red`    | 0 | 0|  0.50 | ガラスによる赤色の減衰係数。小さいと透過率が高くなります |
| `green`  | 0 | 0|  0.50 | ガラスによる緑色の減衰係数。小さいと透過率が高くなります |
| `blue`   | 0 | 0|  0.50 | ガラスによる青色の減衰係数。小さいと透過率が高くなります |
| `blur`   | 8 | 0|  0.01 | ローパスフィルタの強度 |

## `Kaleidoscope`

万華鏡を再現するエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `number` |  3.0 | 3.00 |  10.00 | 万華鏡の鏡の数 |
| `angle`  |  0.0 | 0.00 | 360.00 | 万華鏡の角度 |
| `x`      |  0.5 | 0.00 |   1.00 | 万華鏡の中心 x 座標 |
| `y`      |  0.5 | 0.00 |   1.00 | 万華鏡の中心 y 座標 |
| `radius` |  0.5 | 0.00 |   1.00 | 万華鏡の半径 |
| `albedo` |  0.7 | 0.01 |   0.99 | 鏡による減衰率 |
| `depth`  | 10.0 | 0.00 | 100.00 | 鏡による最大反射数 |

## `Tiling`

入力画像を全画面にタイリングするエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `Input` | 対象画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `mirroring` | 0 | 0 | 1 | 鏡面配置するか？ |

## `ImageQuilting`

2 つの入力画像について、重なっている領域の切り取り方を境界線が目立たないように最適化して並べるエフェクトです。

### 入力ポート

| ポート名 | 説明 |
| --- | --- |
| `background` | 背面画像 |
| `foreground` | 前面画像 |

### パラメータ

| パラメータ名 | デフォルト値 | 最小値 | 最大値 | 説明 |
| --- | ---:| ---:| ---:| --- |
| `border` | 0 | 0.2 | 0 | 1 | 最適化する境界の幅 |
| `debug`  | 0 | 0.0 | 0 | 1 | 境界線を表示するか？ |
